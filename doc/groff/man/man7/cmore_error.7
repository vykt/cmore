.\" Automatically generated by Pandoc 3.1.2
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "CMORE ERRORS" "7" "Dec 2024" "CMore v1.0.0" "CMore Documentation"
.hy
.SH LIBRARY
.PP
The C More Library (\f[I]libcmore\f[R], \f[I]-lcmore\f[R])
.SH DESCRIPTION
.PP
\f[B]CMore\f[R] implements its own version of libc\[aq]s
\f[I]errno\f[R].
If you are familiar with \f[I]errno\f[R], \f[B]CMore\f[R]\[aq]s
implementation should be very intuitive.
.PP
\f[B]CMore\f[R] functions return \f[B]NULL\f[R] or \f[B]-1\f[R] on fail.
The cause of the last error to occur is stored as an \f[I]error
code\f[R] in the thread-local integer \f[V]cm_errno\f[R].
Each \f[I]error code\f[R] has a corresponding message that describes the
error.
.PP
\f[V]cm_perror()\f[R] will print the last error\[aq]s message to
\f[B]stderr\f[R]:
.IP
.nf
\f[C]
//cause an error (index too large)
cm_list_remove(&list, 1337);

//print error code message to stderr
cm_perror(\[dq]Forced error\[dq]);

//[output]: Forced error: Index out of range.
\f[R]
.fi
.PP
\f[V]cm_strerror()\f[R] takes an \f[I]error code\f[R] and returns a
pointer to its corresponding message:
.IP
.nf
\f[C]
//get error message for a key error
char * key_error_msg = cm_strerror(CM_ERR_USER_KEY);

//print the error message
puts(key_error_msg);

//[output]: Key not present in tree.
\f[R]
.fi
.PP
\f[I]Error code\f[R] values consist of four (4) digits.
The first (1) digit stores the owner of the error code.
Value of \f[B]1\f[R] is reserved for \f[B]CMore\f[R].
The second (2) digit stores the class of the error.
Value \f[B]1\f[R] represents a user error, such as specifying an invalid
index.
Value \f[B]2\f[R] represents an internal \f[B]CMore\f[R] error typically
caused by bugs in \f[B]CMore\f[R].
Value \f[B]3\f[R] represents an environment error, such as a failure to
acquire memory.
Digits three (3) and four (4) store the error number in that class.
